<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduHub - Learn & Earn Certificates</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.1);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .logo {
            font-size: 28px;
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            font-size: 14px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            box-shadow: 0 4px 15px rgba(238, 90, 36, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(238, 90, 36, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .hero {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .hero h1 {
            font-size: 3.5em;
            margin-bottom: 20px;
            text-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .hero p {
            font-size: 1.3em;
            opacity: 0.9;
            margin-bottom: 30px;
        }

        .course-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .course-card {
            -webkit-backdrop-filter: blur(15px);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .course-card.featured {
            background: rgba(255, 215, 0, 0.15);
            border: 2px solid rgba(255, 215, 0, 0.3);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.2);
        }

        .course-card.featured::before {
            content: "🌟 FEATURED";
            position: absolute;
            top: -10px;
            left: 20px;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            color: #333;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
        }

        .course-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.7);
        }

        .course-stats {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.8);
        }

        .course-stat-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .course-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            background: rgba(255, 255, 255, 0.15);
        }

        .course-card h3 {
            color: white;
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        .course-card p {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            height: 8px;
            margin-bottom: 15px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            height: 100%;
            transition: width 0.3s ease;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            -webkit-backdrop-filter: blur(5px);
            backdrop-filter: blur(5px);
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center; /* Center vertically */
            z-index: 1000;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            width: 90%;
            max-width: 1000px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 20px 20px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .video-container {
            position: relative;
            padding: 30px;
        }

        .video-player {
            width: 100%;
            height: 400px;
            border-radius: 15px;
            background: #000;
        }
        
        /* New Tab Styles */
        .tab-navigation {
            display: flex;
            justify-content: space-around;
            border-bottom: 2px solid #e9ecef;
            margin-bottom: 20px;
        }

        .tab-button {
            background: none;
            border: none;
            padding: 15px 25px;
            font-size: 1.1em;
            cursor: pointer;
            font-weight: 600;
            color: #667eea;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .tab-button.active {
            color: #ee5a24;
            border-bottom: 3px solid #ee5a24;
        }
        /* End New Tab Styles */

        .quiz-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-top: 0;
        }

        .quiz-question {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .quiz-option {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .quiz-option:hover {
            border-color: #667eea;
            transform: translateX(5px);
        }

        .quiz-option.selected {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }

        .quiz-option.correct {
            border-color: #28a745;
            background: rgba(40, 167, 69, 0.1);
        }

        .quiz-option.incorrect {
            border-color: #dc3545;
            background: rgba(220, 53, 69, 0.1);
        }

        .code-editor-container {
            margin-top: 30px;
        }

        .code-editor {
            width: 100%;
            height: 300px;
            border: 1px solid #ddd;
            border-radius: 10px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            padding: 15px;
            resize: vertical;
        }

        .code-output {
            background: #1e1e1e;
            color: #d4d4d4;
            border-radius: 10px;
            padding: 20px;
            margin-top: 15px;
            font-family: 'Consolas', 'Monaco', monospace;
            white-space: pre-wrap;
            max-height: 200px;
            overflow-y: auto;
        }

        .form-group input {
            width: 100%;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.9);
            color: black;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .auth-form {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 40px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
        }

        .auth-form h2 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            color: #333;
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .form-group input::placeholder {
            color: rgba(0, 0, 0, 0.6);
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
            background: rgba(255, 255, 255, 1);
        }

        .certificate-container {
            background: linear-gradient(45deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            margin: 20px 0;
        }

        .ai-explanation {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            line-height: 1.6;
        }
        
        .ai-explanation h4 {
            color: #FFD700;
            margin-bottom: 10px;
        }
        
        .notes-content {
            padding: 25px;
            background: #f8f9fa;
            border-radius: 15px;
            color: #333;
        }
        
        .notes-content ul {
            list-style: disc;
            padding-left: 20px;
            margin-top: 10px;
        }

        .intro-video-section {
            background: rgba(255, 255, 255, 0.1);
            -webkit-backdrop-filter: blur(15px);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
        }

        .certificates-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .certificates-header h2 {
            color: white;
            font-size: 2em;
            margin: 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .certificates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .certificate-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 25px;
            color: white;
            position: relative;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .certificate-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
        }

        .certificate-card::before {
            content: "🏆";
            position: absolute;
            top: -15px;
            right: -10px;
            font-size: 30px;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
        }

        .certificate-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .certificate-date {
            font-size: 0.9em;
            opacity: 0.8;
            margin-bottom: 15px;
        }

        .certificate-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .certificate-score {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }

        .certificate-actions {
            display: flex;
            gap: 10px;
        }

        .btn-certificate {
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            font-size: 12px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .btn-certificate:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .no-certificates {
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
            padding: 40px;
        }

        .no-certificates-icon {
            font-size: 4em;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .certificate-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .certificate-display {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 800px;
            width: 90%;
            text-align: center;
            position: relative;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .certificate-border {
            border: 8px solid #FFD700;
            border-radius: 15px;
            padding: 30px;
            background: linear-gradient(45deg, #f9f9f9, #ffffff);
        }

        .certificate-logo {
            font-size: 3em;
            margin-bottom: 20px;
        }

        .certificate-text {
            color: #333;
            line-height: 1.6;
        }

        .certificate-course-name {
            font-size: 2em;
            color: #667eea;
            margin: 20px 0;
            font-weight: bold;
        }

        .certificate-student-name {
            font-size: 1.5em;
            color: #333;
            margin: 15px 0;
            font-style: italic;
        }

        .certificate-signature {
            margin-top: 30px;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .signature-line {
            text-align: center;
            color: #666;
        }

        .signature-line hr {
            width: 150px;
            margin: 10px auto;
            border: 1px solid #333;
        }

        .intro-video-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .intro-video {
            width: 100%;
            height: 450px;
            border: none;
        }

        .intro-video-header {
            color: white;
            margin-bottom: 25px;
        }

        .intro-video-header h2 {
            font-size: 2.2em;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .intro-video-header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .hero h1 { font-size: 2.5em; }
            .course-grid { grid-template-columns: 1fr; }
            .nav { flex-direction: column; gap: 15px; }
            .video-player { height: 250px; }
            .intro-video { height: 250px; }
            .modal-content { width: 95%; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Mock data
        const mockCourses = [
            {
                id: 1,
                title: "Complete Web Development Bootcamp",
                description: "Master full-stack web development from HTML/CSS basics to advanced JavaScript, React, and backend technologies.",
                videos: [
                    { id: 1, title: "HTML Basics & Structure", youtubeId: "qz0aGYrrlhU", duration: "45:32" },
                    { id: 2, title: "CSS Styling & Layouts", youtubeId: "1Rs2ND1ryYc", duration: "52:18" },
                    { id: 3, title: "CSS Flexbox & Grid", youtubeId: "JJSoEo8JSnc", duration: "38:47" },
                    { id: 4, title: "JavaScript Fundamentals", youtubeId: "PkZNo7MFNFg", duration: "42:15" },
                    { id: 5, title: "DOM Manipulation", youtubeId: "y17RuWkWdn8", duration: "35:28" },
                    { id: 6, title: "JavaScript ES6+ Features", youtubeId: "WZQc7RUAg18", duration: "48:33" },
                    { id: 7, title: "Async JavaScript & APIs", youtubeId: "PoRJizFvM7s", duration: "44:12" },
                    { id: 8, title: "React.js Introduction", youtubeId: "bMknfKXIFA8", duration: "38:55" },
                    { id: 9, title: "React Hooks & State Management", youtubeId: "TNhaISOUy6Q", duration: "41:37" },
                    { id: 10, title: "Building React Projects", youtubeId: "hQAHSlTtcmY", duration: "56:24" },
                    { id: 11, title: "Node.js & Backend Basics", youtubeId: "TlB_eWDSMt4", duration: "49:18" },
                    { id: 12, title: "Express.js & REST APIs", youtubeId: "pKd0Rpw7O48", duration: "43:27" },
                    { id: 13, title: "Database Integration (MongoDB)", youtubeId: "ExcRbA7fy_A", duration: "47:33" },
                    { id: 14, title: "Authentication & Security", youtubeId: "F-sFp_AvHc8", duration: "39:42" },
                    { id: 15, title: "Deployment & Production", youtubeId: "kUMe1FH4CHE", duration: "35:16" }
                ],
                progress: 0,
                language: "javascript",
                featured: true,
                level: "Beginner to Advanced",
                totalDuration: "11h 38m",
                students: 2847
            },
            {
                id: 2,
                title: "JavaScript Fundamentals",
                description: "Master the basics of JavaScript programming with hands-on exercises and real-world projects.",
                videos: [
                    { id: 1, title: "Variables and Data Types", youtubeId: "PkZNo7MFNFg", duration: "15:30" },
                    { id: 2, title: "Functions and Scope", youtubeId: "y17RuWkWdn8", duration: "22:45" },
                    { id: 3, title: "Objects and Arrays", youtubeId: "WZQc7RUAg18", duration: "18:20" }
                ],
                progress: 65,
                language: "javascript",
                level: "Beginner",
                totalDuration: "56m",
                students: 1523
            },
            {
                id: 3,
                title: "Python for Beginners",
                description: "Learn Python programming from scratch with interactive coding challenges and AI guidance.",
                videos: [
                    { id: 1, title: "Python Syntax Basics", youtubeId: "kqtD5dpn9C8", duration: "20:15" },
                    { id: 2, title: "Control Structures", youtubeId: "HBxCHonP6Ro", duration: "25:30" },
                    { id: 3, title: "Data Structures", youtubeId: "W8KRzm-HUcc", duration: "30:00" }
                ],
                progress: 30,
                language: "python",
                level: "Beginner",
                totalDuration: "1h 15m",
                students: 987
            },
            {
                id: 4,
                title: "React Development",
                description: "Build modern web applications with React.js, hooks, and component-based architecture.",
                videos: [
                    { id: 1, title: "React Basics", youtubeId: "bMknfKXIFA8", duration: "28:45" },
                    { id: 2, title: "State and Props", youtubeId: "TNhaISOUy6Q", duration: "35:20" },
                    { id: 3, title: "Hooks and Effects", youtubeId: "hQAHSlTtcmY", duration: "40:15" }
                ],
                progress: 0,
                language: "javascript",
                level: "Intermediate",
                totalDuration: "1h 44m",
                students: 756
            },
            // --- C Programming Course with "🧵" emoji added ---
            {
                id: 5,
                title: "🧵 Full C Programming Course", // Updated title
                description: "A complete, in-depth course on C programming, covering fundamental concepts, control flow, data structures, and advanced features.",
                videos: [
                    { id: 1, title: "🧵 Variables, Operators and Input/ Output (Part 1)", youtubeId: "rQoqCP7LX60", duration: "4h 02m" }, // Updated title
                    { id: 2, title: "🧵 If Else & Control Structures (Part 2)", youtubeId: "7PSfRdeY5qE", duration: "2h 55m" }, // Updated title
                    { id: 3, title: "🧵 Loops, Functions, and Arrays (Part 3 - Simulated)", youtubeId: "kqtD5dpn9C8", duration: "3h 10m" } // Updated title
                ],
                progress: 0,
                language: "c", 
                level: "Beginner to Intermediate",
                totalDuration: "10h 07m",
                students: 4102
            }
            // ----------------------------------------------------
        ];

        const mockQuizzes = {
            1: [
                {
                    question: "What does HTML stand for?",
                    options: ["Hyper Text Markup Language", "High Tech Modern Language", "Home Tool Markup Language", "Hyperlink Text Markup Language"],
                    correct: 0,
                    explanation: "HTML stands for HyperText Markup Language. It's the standard markup language for creating web pages and web applications."
                },
                {
                    question: "Which CSS property is used to change the background color?",
                    options: ["color", "bgcolor", "background-color", "background"],
                    correct: 2,
                    explanation: "The 'background-color' property is used to set the background color of an element in CSS."
                },
                {
                    question: "What is the correct way to declare a JavaScript variable?",
                    options: ["variable carName;", "var carName;", "v carName;", "declare carName;"],
                    correct: 1,
                    explanation: "In JavaScript, variables are declared using 'var', 'let', or 'const' keywords. 'var carName;' is the traditional way."
                },
                {
                    question: "Which method is used to add an element to the end of an array?",
                    options: ["push()", "add()", "append()", "insert()"],
                    correct: 0,
                    explanation: "The push() method adds one or more elements to the end of an array and returns the new length of the array."
                },
                {
                    question: "What does API stand for?",
                    options: ["Application Programming Interface", "Advanced Programming Integration", "Automated Program Interaction", "Application Process Integration"],
                    correct: 0,
                    explanation: "API stands for Application Programming Interface. It's a set of protocols and tools for building software applications."
                }
            ],
            2: [
                {
                    question: "What is the correct way to declare a variable in JavaScript?",
                    options: ["var x = 5;", "variable x = 5;", "v x = 5;", "declare x = 5;"],
                    correct: 0,
                    explanation: "In JavaScript, 'var', 'let', or 'const' are used to declare variables. 'var' is the traditional way."
                },
                {
                    question: "Which data type is NOT primitive in JavaScript?",
                    options: ["string", "number", "object", "boolean"],
                    correct: 2,
                    explanation: "Objects are reference types, not primitive. Primitive types include string, number, boolean, null, undefined, and symbol."
                },
                {
                    question: "What does '===' operator do?",
                    options: ["Assignment", "Comparison", "Strict equality", "Not equal"],
                    correct: 2,
                    explanation: "The '===' operator checks for strict equality, comparing both value and type without type conversion."
                },
                {
                    question: "How do you create a function in JavaScript?",
                    options: ["function myFunc() {}", "create myFunc() {}", "def myFunc():", "func myFunc() {}"],
                    correct: 0,
                    explanation: "Functions in JavaScript are declared using the 'function' keyword followed by the function name and parentheses."
                },
                {
                    question: "What is the output of: console.log(typeof null)?",
                    options: ["null", "undefined", "object", "string"],
                    correct: 2,
                    explanation: "This is a famous JavaScript quirk. typeof null returns 'object', which is considered a bug that has been preserved for compatibility."
                }
            ],
            // New Quiz for C Programming - Lesson 1
            5: [
                {
                    question: "In C, which header file is required for using the printf() function?",
                    options: ["stdlib.h", "stdio.h", "math.h", "iostream.h"],
                    correct: 1,
                    explanation: "The printf() function is part of the Standard Input/Output library in C, which requires including <stdio.h>."
                },
                {
                    question: "Which data type is used to store a single character in C?",
                    options: ["string", "int", "char", "float"],
                    correct: 2,
                    explanation: "The 'char' data type is fundamental in C for storing single characters, requiring 1 byte of memory."
                },
                {
                    question: "What symbol marks the end of a statement in C?",
                    options: [":", ".", ";", "!"],
                    correct: 2,
                    explanation: "All executable statements in C must be terminated with a semicolon (;)."
                }
            ]
        };

        const codeTemplates = {
            javascript: `// Welcome to JavaScript!
// Try writing a simple function
function greet(name) {
    return "Hello, " + name + "!";
}

console.log(greet("Student"));`,
            python: `# Welcome to Python!
# Try writing a simple function
def greet(name):
    return f"Hello, {name}!"

print(greet("Student"))`,
            // Mock C template
            c: `// Welcome to C Programming!
#include <stdio.h>

int main() {
    int x = 20;
    int y = 5;
    printf("Sum: %d\\n", x + y);
    printf("Product: %d\\n", x * y);
    return 0;
}`
        };
        
        // AI Note Generation Function
        const generateAINotes = (videoTitle) => {
            if (videoTitle.includes("HTML")) {
                return `### 💡 Key Concepts: HTML Basics
1.  **Structure:** HTML is the backbone of all web pages, defining the page structure using elements (tags).
2.  **Core Tags:** Essential tags include \`<html>\`, \`<head>\`, \`<body>\`, and metadata tags like \`<title>\`.
3.  **Semantic Elements:** Use elements like \`<header>\`, \`<main>\`, \`<footer>\`, and \`<article>\` for clarity and SEO.
4.  **Practice:** Always validate your HTML to ensure proper structure.`;
            } else if (videoTitle.includes("CSS")) {
                return `### 💡 Key Concepts: CSS Styling
1.  **Separation of Concerns:** CSS controls the presentation of the HTML structure.
2.  **Selectors:** Master class (\`.\`), ID (\`#\`), and element selectors. Specificity matters!
3.  **Box Model:** Every HTML element is a box with Content, Padding, Border, and Margin. Understanding this is crucial for layout.
4.  **Flexbox/Grid:** Modern layout techniques (Flexbox for 1D, Grid for 2D layouts) simplify complex page structures significantly.`;
            } else if (videoTitle.includes("C Programming") || videoTitle.includes("Variables") || videoTitle.includes("🧵")) {
                return `### 💡 Key Concepts: C Programming Fundamentals
1.  **Variables & Data Types:** C is a strictly typed language. Variables must be declared with a type (\`int\`, \`float\`, \`char\`, etc.) before use.
2.  **Operators:** Covers arithmetic (\`+\`, \`-\`, \`*\`, \`/\`, \`%\`), relational (\`<\`, \`>\`, \`==\`), and logical operators.
3.  **I/O Functions:** Use \`#include <stdio.h>\`. \`printf()\` for output, \`scanf()\` for user input. Remember to use format specifiers (\`%d\`, \`%f\`, \`%c\`).
4.  **Memory:** Variables are stored directly in memory locations (stack).`;
            } else if (videoTitle.includes("If Else")) {
                return `### 💡 Key Concepts: Control Flow
1.  **Conditional Execution:** \`if-else\` statements allow the program to make decisions based on boolean conditions.
2.  **Syntax:** \`if (condition) { /* code */ } else if (another_condition) { /* code */ } else { /* default code */ }\`
3.  **Nested Logic:** Conditions can be nested to handle complex decision trees.
4.  **Best Practice:** Always use curly braces \`{}\` even for single-line statements to prevent bugs.`;
            } else {
                return `### 💡 Key Concepts: General Programming Notes
1.  **Modularity:** Breaking down problems into smaller, manageable functions is key.
2.  **Abstraction:** Hiding complex implementation details to show only essential features (e.g., using a function without knowing its internal logic).
3.  **Debugging:** Utilize print statements or debuggers to track variable values and control flow.`;
            }
        }

        // Main App Component
        function App() {
            const [currentView, setCurrentView] = useState('home');
            const [selectedCourse, setSelectedCourse] = useState(null);
            const [currentVideo, setCurrentVideo] = useState(null);
            const [user, setUser] = useState(null);
            const [showAuth, setShowAuth] = useState(false);
            const [authMode, setAuthMode] = useState('login');
            // userProgress tracks completion status of quizzes (boolean: passed >= 80)
            const [userProgress, setUserProgress] = useState({});
            const [userCertificates, setUserCertificates] = useState([]);
            const [showCertificate, setShowCertificate] = useState(null);

            const updateProgress = (courseId, videoId, quizScore) => {
                const newProgress = {
                    ...userProgress,
                    // Mark as passed only if score is 80 or higher
                    [`${courseId}_${videoId}`]: quizScore >= 80
                };
                setUserProgress(newProgress);

                // Check if course is completed
                const course = mockCourses.find(c => c.id === courseId);
                if (course) {
                    const completedVideos = course.videos.filter(video => 
                        newProgress[`${courseId}_${video.id}`]
                    ).length;
                    
                    if (completedVideos === course.videos.length) {
                        // Check if certificate already exists before adding
                         const existingCert = userCertificates.find(c => c.courseId === courseId);
                         if (existingCert) return;

                        // Generate certificate
                        const newCertificate = {
                            id: Date.now(),
                            courseId: courseId,
                            courseName: course.title,
                            studentName: user?.name || 'Student', // Use name
                            completionDate: new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }),
                            score: calculateOverallScore(courseId),
                            certificateNumber: `EDU${courseId}${Date.now().toString().slice(-6)}`
                        };
                        
                        setUserCertificates(prev => [...prev, newCertificate]);
                    }
                }
            };

            const calculateCourseProgress = (courseId) => {
                const course = mockCourses.find(c => c.id === courseId);
                if (!course) return 0;
                
                const completedVideos = course.videos.filter(video => 
                    userProgress[`${courseId}_${video.id}`]
                ).length;
                
                return Math.round((completedVideos / course.videos.length) * 100);
            };

            const calculateOverallScore = (courseId) => {
                // Simulate overall course score
                return Math.floor(Math.random() * 20) + 80; // Random score between 80-100
            };

            // Add some sample certificates when user logs in
            const handleLogin = (userData) => {
                setUser(userData);
                setShowAuth(false);
                
                // Add sample certificates for demonstration if none exist
                if (userCertificates.length === 0) {
                    const sampleCertificates = [
                        {
                            id: 1,
                            courseId: 2,
                            courseName: 'JavaScript Fundamentals',
                            studentName: userData.name, // Use name
                            completionDate: 'January 15, 2024',
                            score: 92,
                            certificateNumber: 'EDU2240115'
                        }
                    ];
                    setUserCertificates(sampleCertificates);
                    
                    // Also simulate progress for the certified course
                    setUserProgress({
                        '2_1': true,
                        '2_2': true,
                        '2_3': true,
                    });
                }
            };

            return (
                <div className="container">
                    {currentView === 'home' && (
                        <Home 
                            courses={mockCourses}
                            onCourseSelect={(course) => {
                                setSelectedCourse(course);
                                setCurrentView('course');
                            }}
                            calculateProgress={calculateCourseProgress}
                            user={user}
                            onShowAuth={() => setShowAuth(true)}
                            certificates={userCertificates}
                            onShowCertificate={(cert) => setShowCertificate(cert)}
                        />
                    )}

                    {currentView === 'course' && selectedCourse && (
                        <CourseView 
                            course={selectedCourse}
                            onVideoSelect={(video) => {
                                setCurrentVideo(video);
                                setCurrentView('video');
                            }}
                            onBack={() => setCurrentView('home')}
                            calculateProgress={calculateCourseProgress}
                            userProgress={userProgress} // Passed for accurate lesson status
                        />
                    )}

                    {currentView === 'video' && currentVideo && selectedCourse && (
                        <VideoView 
                            video={currentVideo}
                            course={selectedCourse}
                            onBack={() => setCurrentView('course')}
                            onProgressUpdate={updateProgress}
                            userProgress={userProgress}
                            user={user}
                        />
                    )}

                    {showAuth && (
                        <AuthModal 
                            mode={authMode}
                            onClose={() => setShowAuth(false)}
                            onLogin={handleLogin}
                            onSwitchMode={(mode) => setAuthMode(mode)}
                        />
                    )}

                    {showCertificate && (
                        <CertificateModal 
                            certificate={showCertificate}
                            onClose={() => setShowCertificate(null)}
                        />
                    )}
                </div>
            );
        }

        // Home Component
        function Home({ courses, onCourseSelect, calculateProgress, user, onShowAuth, certificates, onShowCertificate }) {
            return (
                <>
                    <div className="header">
                        <div className="nav">
                            <div className="logo">🎓 EduHub</div>
                            <div className="nav-buttons">
                                {user ? (
                                    <span className="btn btn-secondary">Welcome, {user.name}!</span>
                                ) : (
                                    <button className="btn btn-primary" onClick={onShowAuth}>
                                        Sign In
                                    </button>
                                )}
                            </div>
                        </div>
                        
                        <div className="hero">
                            <h1>Learn. Code. Certify.</h1>
                            <p>Master programming with AI-powered courses, interactive quizzes, and hands-on coding challenges</p>
                            <button className="btn btn-primary" onClick={() => onCourseSelect(courses[0])}>
                                Start Learning Now
                            </button>
                        </div>
                    </div>

                    {user && (
                        <div className="intro-video-section">
                            <div className="intro-video-header">
                                {/* NEW VIDEO TITLE */}
                                <h2>🎬 What *is* Coding?</h2>
                                <p>Start your programming journey by understanding the fundamental concept of coding, how it works, and why computers use binary.</p>
                            </div>
                            <div className="intro-video-container">
                                <iframe
                                    className="intro-video"
                                    src="https://www.youtube.com/embed/uV13Myyoee0"
                                    title="What *is* Coding?"
                                    frameBorder="0"
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                    allowFullScreen
                                />
                            </div>
                            <p style={{ color: 'rgba(255, 255, 255, 0.8)', marginTop: '15px', fontSize: '14px' }}>
                                💡 This introduction video helps explain the core concept of programming before diving into specific technologies.
                            </p>
                        </div>
                    )}

                    {user && (
                        <div className="certificates-section">
                            <div className="certificates-header">
                                <h2>🏆 My Certificates</h2>
                                <span style={{color: 'rgba(255,255,255,0.8)', fontSize: '14px'}}>
                                    {certificates.length} certificate{certificates.length !== 1 ? 's' : ''} earned
                                </span>
                            </div>
                            
                            {certificates.length > 0 ? (
                                <div className="certificates-grid">
                                    {certificates.map(cert => (
                                        <div key={cert.id} className="certificate-card" onClick={() => onShowCertificate(cert)}>
                                            <div className="certificate-title">{cert.courseName}</div>
                                            <div className="certificate-date">Completed: {cert.completionDate}</div>
                                            <div className="certificate-details">
                                                <div className="certificate-score">Score: {cert.score}%</div>
                                                <div style={{fontSize: '0.8em', opacity: 0.8}}>
                                                    Certificate #{cert.certificateNumber}
                                                </div>
                                            </div>
                                            <div className="certificate-actions">
                                                <button className="btn-certificate">👁️ View</button>
                                                <button className="btn-certificate">📄 Download PDF</button>
                                                <button className="btn-certificate">📤 Share</button>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            ) : (
                                <div className="no-certificates">
                                    <div className="no-certificates-icon">🎓</div>
                                    <h3>No certificates yet</h3>
                                    <p>Complete your first course to earn your certificate!</p>
                                    <button className="btn btn-primary" onClick={() => onCourseSelect(courses[0])} style={{marginTop: '20px'}}>
                                        Start Your First Course
                                    </button>
                                </div>
                            )}
                        </div>
                    )}

                    <div className="stats-grid">
                        <div className="stat-card">
                            <div className="stat-number">500+</div>
                            <div>Students Enrolled</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-number">95%</div>
                            <div>Completion Rate</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-number">24/7</div>
                            <div>AI Support</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-number">{user ? certificates.length : '100+'}</div>
                            <div>Certificates Issued</div>
                        </div>
                    </div>

                    <div className="course-grid">
                        {courses.map(course => (
                            <div key={course.id} className={`course-card ${course.featured ? 'featured' : ''}`} onClick={() => onCourseSelect(course)}>
                                <div className="course-meta">
                                    <span>🎓 {course.level}</span>
                                    <span>⏱️ {course.totalDuration}</span>
                                </div>
                                <h3>{course.title}</h3>
                                <p>{course.description}</p>
                                <div className="course-stats">
                                    <div className="course-stat-item">
                                        <span>📹</span>
                                        <span>{course.videos.length} lessons</span>
                                    </div>
                                    <div className="course-stat-item">
                                        <span>👥</span>
                                        <span>{course.students} students</span>
                                    </div>
                                </div>
                                <div className="progress-bar">
                                    <div 
                                        className="progress-fill" 
                                        style={{width: `${calculateProgress(course.id)}%`}}
                                    ></div>
                                </div>
                                <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}>
                                    <span style={{color: 'rgba(255,255,255,0.7)'}}>
                                        Progress: {calculateProgress(course.id)}%
                                    </span>
                                    <button className="btn btn-primary">
                                        {calculateProgress(course.id) === 0 ? 'Start Course' : 'Continue'}
                                    </button>
                                </div>
                            </div>
                        ))}
                    </div>
                </>
            );
        }

        // Course View Component
        function CourseView({ course, onVideoSelect, onBack, calculateProgress, userProgress }) {
            const courseProgress = calculateProgress(course.id);
            return (
                <div className="modal">
                    <div className="modal-content">
                        <div className="modal-header">
                            <h2>{course.title}</h2>
                            <button className="close-btn" onClick={onBack}>×</button>
                        </div>
                        <div style={{padding: '30px'}}>
                            <p style={{marginBottom: '30px', fontSize: '1.1em', lineHeight: '1.6'}}>
                                {course.description}
                            </p>
                            
                            <div className="progress-bar" style={{marginBottom: '30px'}}>
                                <div 
                                    className="progress-fill" 
                                    style={{width: `${courseProgress}%`}}
                                ></div>
                            </div>
                            <p style={{textAlign: 'center', marginBottom: '30px', fontWeight: 'bold'}}>
                                Course Progress: {courseProgress}%
                            </p>

                            <h3 style={{marginBottom: '20px'}}>Course Content</h3>
                            <div style={{display: 'flex', flexDirection: 'column', gap: '15px'}}>
                                {course.videos.map((video, index) => {
                                    const isCompleted = userProgress[`${course.id}_${video.id}`];

                                    return (
                                        <div 
                                            key={video.id}
                                            style={{
                                                background: '#f8f9fa',
                                                border: '1px solid #e9ecef',
                                                borderRadius: '10px',
                                                padding: '20px',
                                                cursor: 'pointer',
                                                transition: 'all 0.3s ease'
                                            }}
                                            onClick={() => onVideoSelect(video)}
                                        >
                                            <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}>
                                                <div>
                                                    <h4 style={{marginBottom: '5px'}}>
                                                        Lesson {index + 1}: {video.title}
                                                    </h4>
                                                    <span style={{color: '#666'}}>Duration: {video.duration}</span>
                                                </div>
                                                <div style={{display: 'flex', alignItems: 'center', gap: '10px'}}>
                                                    <span style={{
                                                        background: isCompleted ? '#28a745' : '#dee2e6', // Check actual progress
                                                        color: 'white',
                                                        padding: '5px 10px',
                                                        borderRadius: '15px',
                                                        fontSize: '12px'
                                                    }}>
                                                        {isCompleted ? 'Passed Quiz' : 'Not Started'}
                                                    </span>
                                                    <span>▶️</span>
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>

                            {courseProgress === 100 && (
                                <div className="certificate-container" style={{marginTop: '30px'}}>
                                    <h3>🎉 Congratulations!</h3>
                                    <p>You've completed this course. Generate your certificate!</p>
                                    <button className="btn btn-primary" onClick={onBack}>
                                        View Certificates
                                    </button>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        // --- NEW AI NOTES COMPONENT ---
        function AINotes({ video, course }) {
            const [notes, setNotes] = useState("");
            const [loading, setLoading] = useState(false);
            
            useEffect(() => {
                setLoading(true);
                // Simulate AI generation time
                setTimeout(() => {
                    setNotes(generateAINotes(video.title));
                    setLoading(false);
                }, 1000);
            }, [video.title]);

            return (
                <div className="notes-content">
                    <h3 style={{marginBottom: '15px', color: '#667eea'}}>📝 AI-Generated Notes for: {video.title}</h3>
                    {loading ? (
                        <p>🤖 AI Assistant is compiling key points from the lecture...</p>
                    ) : (
                        <div dangerouslySetInnerHTML={{__html: notes.replace(/\n/g, '<br/>')}} />
                    )}
                </div>
            );
        }

        // Video View Component - Updated with Tabs
        function VideoView({ video, course, onBack, onProgressUpdate, userProgress }) {
            const [currentVideoTab, setCurrentVideoTab] = useState('video'); // New state for tabs
            const [currentQuizIndex, setCurrentQuizIndex] = useState(0); 
            const [selectedAnswers, setSelectedAnswers] = useState({});
            const [quizCompleted, setQuizCompleted] = useState(false);
            const [score, setScore] = useState(0);
            const [showExplanation, setShowExplanation] = useState(false);
            const [code, setCode] = useState(codeTemplates[course.language] || codeTemplates['javascript']); // Default to JS
            const [codeOutput, setCodeOutput] = useState('');
            const [showQuizResult, setShowQuizResult] = useState(false);
            
            // Re-initialize quiz state when video changes
            useEffect(() => {
                setCurrentVideoTab('video');
                setCurrentQuizIndex(0);
                setSelectedAnswers({});
                setQuizCompleted(false);
                setScore(0);
                setShowExplanation(false);
                setCode(codeTemplates[course.language] || codeTemplates['javascript']);
                setCodeOutput('');
                setShowQuizResult(false);
            }, [video.id]);


            const quizzes = mockQuizzes[course.id] || mockQuizzes[video.id] || [];
            const currentQuizData = quizzes[currentQuizIndex];

            // Calculate score for the *current* set of answered quizzes
            const calculateCurrentScore = () => {
                let currentScore = 0;
                quizzes.forEach((quiz, index) => {
                    if (selectedAnswers[index] === quiz.correct) {
                        currentScore += (100 / quizzes.length);
                    }
                });
                return Math.round(currentScore);
            }

            const handleAnswerSelect = (optionIndex) => {
                setSelectedAnswers({
                    ...selectedAnswers,
                    [currentQuizIndex]: optionIndex
                });
            };

            const handleSubmitAnswer = () => {
                if (selectedAnswers[currentQuizIndex] === undefined) return;
                setShowExplanation(true);
            };

            const handleNextAction = () => {
                // 1. Advance to next question or complete quiz
                if (currentQuizIndex < quizzes.length - 1) {
                    // Advance to next question
                    setCurrentQuizIndex(currentQuizIndex + 1);
                    setShowExplanation(false);
                    // Automatically jump to the next video if user is clicking "Next Question" 
                    // and they've already passed this quiz on a previous attempt
                    if (userProgress[`${course.id}_${video.id}`]) {
                         const nextVideo = course.videos[course.videos.findIndex(v => v.id === video.id) + 1];
                         if (nextVideo) {
                             onBack(); // Go back to course view
                             // Note: A real app would then immediately select the next video
                         }
                    }
                } else {
                    // Complete Quiz
                    setQuizCompleted(true);
                    const finalScore = calculateCurrentScore();
                    setScore(finalScore);
                    setShowQuizResult(true);

                    // Update global progress state
                    onProgressUpdate(course.id, video.id, finalScore);
                }
            };

            // Safer Code Execution
            const runCode = () => {
                try {
                    let output = '';
                    if (course.language === 'javascript') {
                        const customConsole = {
                            log: (...args) => { output += args.join(' ') + '\n'; }
                        };
                        const safeCode = `(function(console) { ${code} })(customConsole);`;
                        eval(safeCode);
                    } else if (course.language === 'c' || course.language === 'python') {
                        // Simulated execution for non-JS environments
                        if (code.includes('printf("') || code.includes('print(')) {
                            output = code.split('\n')
                                .filter(line => line.includes('printf') || line.includes('print'))
                                .map(line => `>> ${line.trim()}`)
                                .join('\n');
                            output = "Code simulation successful.\n" + output + "\n(This is simulated output for " + course.language.toUpperCase() + ")";
                        } else {
                             output = `Code simulation successful! No output functions found (e.g., printf or print).`;
                        }
                    }
                    setCodeOutput(output || 'Code executed successfully (no console output).');
                } catch (error) {
                    setCodeOutput(`Execution Error: ${error.message}`);
                }
            };

            const isLessonCompleted = userProgress[`${course.id}_${video.id}`];

            return (
                <div className="modal">
                    <div className="modal-content">
                        <div className="modal-header">
                            <h2>{video.title}</h2>
                            <button className="close-btn" onClick={onBack}>×</button>
                        </div>
                        <div className="video-container">
                            
                            <div className="tab-navigation">
                                <button 
                                    className={`tab-button ${currentVideoTab === 'video' ? 'active' : ''}`}
                                    onClick={() => setCurrentVideoTab('video')}>
                                    📺 Video & Code Editor
                                </button>
                                <button 
                                    className={`tab-button ${currentVideoTab === 'quiz' ? 'active' : ''}`}
                                    onClick={() => setCurrentVideoTab('quiz')}>
                                    ❓ Quiz ({isLessonCompleted ? 'Passed' : 'Pending'})
                                </button>
                                <button 
                                    className={`tab-button ${currentVideoTab === 'notes' ? 'active' : ''}`}
                                    onClick={() => setCurrentVideoTab('notes')}>
                                    🧠 AI Notes
                                </button>
                            </div>

                            {/* --- TAB CONTENT START --- */}

                            {/* Video Tab Content */}
                            {currentVideoTab === 'video' && (
                                <div>
                                    <div className="video-player">
                                        <iframe
                                            width="100%"
                                            height="100%"
                                            src={`https://www.youtube.com/embed/${video.youtubeId}`}
                                            title={video.title}
                                            frameBorder="0"
                                            allowFullScreen
                                            style={{borderRadius: '15px'}}
                                        />
                                    </div>
                                    <div className="code-editor-container">
                                        <h3>💻 Practice Coding ({course.language.toUpperCase()})</h3>
                                        <p>Try out the concepts you learned in this interactive code editor:</p>
                                        <textarea
                                            className="code-editor"
                                            value={code}
                                            onChange={(e) => setCode(e.target.value)}
                                            placeholder="Write your code here..."
                                        />
                                        <div style={{marginTop: '15px', display: 'flex', gap: '10px'}}>
                                            <button className="btn btn-primary" onClick={runCode}>
                                                ▶️ Run Code
                                            </button>
                                            <button className="btn btn-secondary" onClick={() => setCode(codeTemplates[course.language] || codeTemplates['javascript'])}>
                                                🔄 Reset Code
                                            </button>
                                        </div>
                                        {codeOutput && (
                                            <div className="code-output">
                                                <strong>Output:</strong><br/>
                                                {codeOutput}
                                            </div>
                                        )}
                                    </div>
                                </div>
                            )}

                            {/* Quiz Tab Content */}
                            {currentVideoTab === 'quiz' && (
                                <div>
                                    {isLessonCompleted && !showQuizResult && (
                                        <div className="certificate-container" style={{background: 'linear-gradient(45deg, #28a745, #1e7e34)', margin: '0 0 20px 0'}}>
                                            <h3>✅ Quiz Passed!</h3>
                                            <p>You have already completed this lesson and passed the quiz.</p>
                                            <button className="btn btn-secondary" onClick={onBack} style={{marginTop: '15px'}}>
                                                Go to Course Overview
                                            </button>
                                        </div>
                                    )}

                                    {!showQuizResult && currentQuizData && !isLessonCompleted && (
                                        <div className="quiz-container">
                                            <h3>Quiz Question {currentQuizIndex + 1} of {quizzes.length}</h3>
                                            <div className="quiz-question">{currentQuizData.question}</div>
                                            <div className="quiz-options">
                                                {currentQuizData.options.map((option, index) => (
                                                    <div
                                                        key={index}
                                                        className={`quiz-option ${
                                                            selectedAnswers[currentQuizIndex] === index ? 'selected' : ''
                                                        } ${
                                                            showExplanation && index === currentQuizData.correct ? 'correct' : ''
                                                        } ${
                                                            showExplanation && selectedAnswers[currentQuizIndex] === index && index !== currentQuizData.correct ? 'incorrect' : ''
                                                        }`}
                                                        onClick={() => handleAnswerSelect(index)}
                                                        style={{pointerEvents: showExplanation ? 'none' : 'auto'}}
                                                    >
                                                        <input 
                                                            type="radio" 
                                                            name={`quiz-${currentQuizIndex}`}
                                                            checked={selectedAnswers[currentQuizIndex] === index}
                                                            readOnly
                                                        />
                                                        {option}
                                                    </div>
                                                ))}
                                            </div>
                                            
                                            {showExplanation && (
                                                <div className="ai-explanation" style={{marginTop: '20px'}}>
                                                    <h4>🤖 Answer Explanation</h4>
                                                    <p>{currentQuizData.explanation}</p>
                                                </div>
                                            )}
                                            
                                            <button 
                                                className="btn btn-primary" 
                                                onClick={showExplanation ? handleNextAction : handleSubmitAnswer}
                                                disabled={selectedAnswers[currentQuizIndex] === undefined && !showExplanation}
                                                style={{marginTop: '20px', opacity: selectedAnswers[currentQuizIndex] === undefined && !showExplanation ? 0.5 : 1}}
                                            >
                                                {showExplanation ? 
                                                    (currentQuizIndex < quizzes.length - 1 ? 'Next Question' : 'View Final Result') 
                                                    : 'Submit Answer'}
                                            </button>
                                        </div>
                                    )}

                                    {showQuizResult && (
                                        <div className="certificate-container">
                                            <h3>🎉 Quiz Completed!</h3>
                                            <p>Your Score: {score}%</p>
                                            {score >= 80 ? (
                                                <div>
                                                    <p>✅ Congratulations! You passed this lesson. Your progress has been recorded.</p>
                                                    <p>You can now return to the course or continue learning.</p>
                                                    <button className="btn btn-primary" onClick={onBack} style={{marginTop: '15px'}}>
                                                        Go to Course Overview
                                                    </button>
                                                </div>
                                            ) : (
                                                <div>
                                                    <p>❌ You need 80% to pass this lesson. Please review the material and try again.</p>
                                                    <button 
                                                        className="btn btn-primary"
                                                        onClick={() => {
                                                            setCurrentQuizIndex(0);
                                                            setSelectedAnswers({});
                                                            setQuizCompleted(false);
                                                            setScore(0);
                                                            setShowExplanation(false);
                                                            setShowQuizResult(false);
                                                        }}
                                                        style={{marginTop: '15px'}}
                                                    >
                                                        Retry Quiz
                                                    </button>
                                                </div>
                                            )}
                                        </div>
                                    )}
                                </div>
                            )}
                            
                            {/* AI Notes Tab Content */}
                            {currentVideoTab === 'notes' && (
                                <AINotes video={video} course={course} />
                            )}
                            
                            {/* --- TAB CONTENT END --- */}

                        </div>
                    </div>
                </div>
            );
        }

        // Auth Modal Component
        function AuthModal({ mode, onClose, onLogin, onSwitchMode }) {
            const [formData, setFormData] = useState({
                name: '',
                email: '',
                password: ''
            });

            const handleSubmit = (e) => {
                e.preventDefault();
                // If logging in, try to use the provided name, otherwise generate one from email (mock logic)
                let userName;
                if (mode === 'signup') {
                    userName = formData.name;
                } else {
                    // For mock login, if name isn't provided (e.g., existing user), derive from email
                    userName = formData.name || formData.email.split('@')[0].charAt(0).toUpperCase() + formData.email.split('@')[0].slice(1);
                }
                
                // Pass name instead of email-derived name for login state
                onLogin({ name: userName, email: formData.email });
            };

            return (
                <div className="modal">
                    <div className="modal-content" style={{maxWidth: '500px'}}>
                        <div className="modal-header">
                            <h2>{mode === 'login' ? 'Sign In' : 'Sign Up'}</h2>
                            <button className="close-btn" onClick={onClose}>×</button>
                        </div>
                        <div style={{padding: '40px'}}>
                            <form onSubmit={handleSubmit}>
                                {/* Name field is required for Sign Up but optional for mock Sign In */}
                                <div className="form-group">
                                    <label>Full Name</label>
                                    <input
                                        type="text"
                                        placeholder="Enter your full name"
                                        value={formData.name}
                                        onChange={(e) => setFormData({...formData, name: e.target.value})}
                                        required={mode === 'signup'}
                                    />
                                </div>

                                <div className="form-group">
                                    <label>Email</label>
                                    <input
                                        type="email"
                                        placeholder="Enter your email"
                                        value={formData.email}
                                        onChange={(e) => setFormData({...formData, email: e.target.value})}
                                        required
                                    />
                                </div>
                                <div className="form-group">
                                    <label>Password</label>
                                    <input
                                        type="password"
                                        placeholder="Enter your password"
                                        value={formData.password}
                                        onChange={(e) => setFormData({...formData, password: e.target.value})}
                                        required
                                    />
                                </div>
                                <button type="submit" className="btn btn-primary" style={{width: '100%', marginBottom: '20px'}}>
                                    {mode === 'login' ? 'Sign In' : 'Create Account'}
                                </button>
                            </form>
                            <p style={{textAlign: 'center', color: '#666'}}>
                                {mode === 'login' ? "Don't have an account? " : "Already have an account? "}
                                <button 
                                    style={{background: 'none', border: 'none', color: '#667eea', cursor: 'pointer', textDecoration: 'underline'}}
                                    onClick={() => {
                                        onSwitchMode(mode === 'login' ? 'signup' : 'login');
                                        setFormData({name: '', email: '', password: ''}); // Clear form on switch
                                    }}
                                >
                                    {mode === 'login' ? 'Sign Up' : 'Sign In'}
                                </button>
                            </p>
                        </div>
                    </div>
                </div>
            );
        }

        // Certificate Modal Component
        function CertificateModal({ certificate, onClose }) {
            return (
                <div className="certificate-modal">
                    <div className="certificate-display">
                        <button className="close-btn" onClick={onClose} style={{position: 'absolute', top: '20px', right: '20px', color: '#333'}}>×</button>
                        
                        <div className="certificate-border">
                            <div className="certificate-logo">🎓</div>
                            
                            <h1 style={{color: '#333', marginBottom: '20px'}}>Certificate of Completion</h1>
                            
                            <div className="certificate-text">
                                <p style={{fontSize: '1.1em', marginBottom: '10px'}}>This is to certify that</p>
                                
                                <div className="certificate-student-name">{certificate.studentName}</div>
                                
                                <p style={{fontSize: '1.1em', margin: '10px 0'}}>has successfully completed the course</p>
                                
                                <div className="certificate-course-name">{certificate.courseName}</div>
                                
                                <p style={{margin: '20px 0'}}>
                                    with a final score of <strong>{certificate.score}%</strong>
                                </p>
                                
                                <p style={{marginBottom: '10px'}}>Date of Completion: {certificate.completionDate}</p>
                                <p style={{fontSize: '0.9em', color: '#666'}}>Certificate ID: {certificate.certificateNumber}</p>
                            </div>
                            
                            <div className="certificate-signature">
                                <div className="signature-line">
                                    <hr />
                                    <p>EduHub Director</p>
                                </div>
                                <div style={{fontSize: '3em', margin: '0 20px'}}>🏆</div>
                                <div className="signature-line">
                                    <hr />
                                    <p>Course Instructor</p>
                                </div>
                            </div>
                        </div>
                        
                        <div style={{marginTop: '30px', display: 'flex', gap: '15px', justifyContent: 'center'}}>
                            <button className="btn btn-primary">
                                📄 Download PDF
                            </button>
                            <button className="btn btn-secondary">
                                📤 Share Certificate
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        // Render the App
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
